{
  "permissions": {
    "allow": [
      "Bash(find:*)",
      "Bash(dir:*)",
      "Bash(curl:*)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(git remote set-url:*)",
      "Bash(git reset:*)",
      "Bash(git remote add:*)",
      "Bash(https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1)",
      "Bash(https://api.github.com/repos/boofactory/LE-BOOM/actions/runs/18818159787/jobs)",
      "Bash(unzip:*)",
      "Bash(\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs/18818159787/logs\" )",
      "Read(//c/**)",
      "Bash(cat:*)",
      "Bash(node -p:*)",
      "Bash(npm install)",
      "Bash(node -e:*)",
      "Bash(npx prisma migrate dev:*)",
      "Bash(git restore:*)",
      "Bash(npm run build:*)",
      "Bash(npx tsc:*)",
      "Bash(docker build:*)",
      "Bash(package-versions.json)",
      "Bash(notion-dbs.json)",
      "Bash(notion-all.json)",
      "Bash(all-events.json)",
      "Bash(containers.json)",
      "Bash(exec-response.json)",
      "Bash(node analyze-test-lucas.js:*)",
      "Bash(node find-lucas.js:*)",
      "Bash(oceane-event.json)",
      "Bash(node analyze-oceane.js:*)",
      "Bash(bash wait-for-build.sh:*)",
      "Bash(timeout 120 bash -c 'while true; do status=$(curl -s \"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\" | node -e \"\"const data=JSON.parse(require(\\\"\"fs\\\"\").readFileSync(0,\\\"\"utf8\\\"\")); const run=data.workflow_runs[0]; console.log(run.status)\"\"); echo \"\"Build status: $status\"\"; if [ \"\"$status\"\" != \"\"in_progress\"\" ] && [ \"\"$status\"\" != \"\"queued\"\" ]; then echo \"\"Final conclusion: $(curl -s \"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\" | node -e \"\"const data=JSON.parse(require(\\\"\"fs\\\"\").readFileSync(0,\\\"\"utf8\\\"\")); console.log(data.workflow_runs[0].conclusion)\"\")\"\"; break; fi; sleep 10; done')",
      "Bash(timeout 120 bash -c 'while true; do status=$(curl -s \"\"\"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\"\"\" | node -e \"\"\"\"const data=JSON.parse(require(\\\"\"\"\"fs\\\"\"\"\").readFileSync(0,\\\"\"\"\"utf8\\\"\"\"\")); const run=data.workflow_runs[0]; console.log(run.status)\"\"\"\"); echo \"\"\"\"Build status: $status\"\"\"\"; if [ \"\"\"\"$status\"\"\"\" != \"\"\"\"in_progress\"\"\"\" ] && [ \"\"\"\"$status\"\"\"\" != \"\"\"\"queued\"\"\"\" ]; then echo \"\"\"\"Final conclusion: $(curl -s \"\"\"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\"\"\" | node -e \"\"\"\"const data=JSON.parse(require(\\\"\"\"\"fs\\\"\"\"\").readFileSync(0,\\\"\"\"\"utf8\\\"\"\"\")); console.log(data.workflow_runs[0].conclusion)\"\"\"\")\"\"\"\"; break; fi; sleep 10; done')",
      "Bash(timeout 120 bash -c 'while true; do status=$(curl -s \"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\" | node -e \"\"const data=JSON.parse(require(\\\"\"fs\\\"\").readFileSync(0,\\\"\"utf8\\\"\")); const run=data.workflow_runs[0]; console.log(run.status)\"\"); echo \"\"Build status: $status\"\"; if [ \"\"$status\"\" != \"\"in_progress\"\" ] && [ \"\"$status\"\" != \"\"queued\"\" ]; then conclusion=$(curl -s \"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\" | node -e \"\"const data=JSON.parse(require(\\\"\"fs\\\"\").readFileSync(0,\\\"\"utf8\\\"\")); console.log(data.workflow_runs[0].conclusion)\"\"); echo \"\"Final conclusion: $conclusion\"\"; break; fi; sleep 10; done')",
      "Bash(containers-test.json)",
      "Bash(echo \"‚è≥ Attente du d√©marrage (25 secondes)...\" sleep 25 echo \"\" echo \"‚úÖ V√©rification du d√©ploiement:\" curl -s \"https://portainer.boofactory.ch/api/endpoints/3/docker/containers/json\" -H \"X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=\")",
      "Bash(echo \"üîç V√©rification de l''''image actuelle...\" curl -s \"https://portainer.boofactory.ch/api/endpoints/3/docker/containers/json\" -H \"X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=\")",
      "Bash(echo '‚è∏Ô∏è Arr√™t de la stack...' curl -X POST https://portainer.boofactory.ch/api/stacks/71/stop?endpointId=3 -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=' 2)",
      "Bash(1 sleep 5)",
      "Bash(echo \"üóëÔ∏è Suppression de l''''ancienne image...\" curl -X DELETE https://portainer.boofactory.ch/api/endpoints/3/docker/images/sha256:4019a8e2455203401e5f99c33aa7a285f7ec25fe72e10aa2583832af97c05747?force=true -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=' 2)",
      "Bash(1 sleep 2)",
      "Bash(echo 'üì• Pull forc√© de la nouvelle image...' curl -X POST \"https://portainer.boofactory.ch/api/endpoints/3/docker/images/create?fromImage=ghcr.io/boofactory/le-boom&tag=main\" -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=' -H 'X-Registry-Auth: eyJ1c2VybmFtZSI6ImJvb2ZhY3RvcnkiLCJwYXNzd29yZCI6ImdocF8wdXZHYzAyTEF1UVFZa3hjTDF4RHViRDlHTEJxTngyNkJnUnYifQ==')",
      "Bash(echo echo '‚ñ∂Ô∏è Red√©marrage de la stack...' curl -X POST https://portainer.boofactory.ch/api/stacks/71/start?endpointId=3 -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=')",
      "Bash(echo \"‚è≥ Attente du d√©marrage (30 secondes)...\" sleep 30 echo \"\" echo \"‚úÖ V√©rification du nouveau d√©ploiement:\" curl -s \"https://portainer.boofactory.ch/api/endpoints/3/docker/containers/json\" -H \"X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=\")",
      "Bash(echo '‚è∏Ô∏è Arr√™t de la stack...' curl -s -X POST https://portainer.boofactory.ch/api/stacks/71/stop?endpointId=3 -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=' sleep 5)",
      "Bash(echo '‚ñ∂Ô∏è Red√©marrage de la stack...' curl -s -X POST https://portainer.boofactory.ch/api/stacks/71/start?endpointId=3 -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=')",
      "Bash(echo echo '‚úÖ V√©rification du d√©ploiement:' curl -s https://portainer.boofactory.ch/api/endpoints/3/docker/containers/json -H 'X-API-Key: ptr_zBlD+aR7Dveqdv6EP6YKqq5PRfZPe9hrHrWQ/nqdeY8=')",
      "Bash(timeout 150 bash -c 'while true; do status=$(curl -s \"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\" | node -e \"\"const data=JSON.parse(require(\\\"\"fs\\\"\").readFileSync(0,\\\"\"utf8\\\"\")); const run=data.workflow_runs[0]; console.log(run.status)\"\"); echo \"\"Build status: $status\"\"; if [ \"\"$status\"\" != \"\"in_progress\"\" ] && [ \"\"$status\"\" != \"\"queued\"\" ]; then conclusion=$(curl -s \"\"https://api.github.com/repos/boofactory/LE-BOOM/actions/runs?per_page=1\"\" | node -e \"\"const data=JSON.parse(require(\\\"\"fs\\\"\").readFileSync(0,\\\"\"utf8\\\"\")); console.log(data.workflow_runs[0].conclusion)\"\"); echo \"\"Final conclusion: $conclusion\"\"; break; fi; sleep 10; done')",
      "Bash(git revert:*)"
    ],
    "deny": [],
    "ask": []
  }
}
